# ğŸ›’ Acme Widget Co - Shopping Basket System

This is a Ruby-based proof of concept for Acme Widget Coâ€™s new sales system. It models a shopping basket with configurable product pricing, delivery rules, and promotional offers.

---

## Setup Instructions

### 1. **Install Dependencies**

To get started, install the required dependencies using `Bundler`. Ensure you have [Bundler](https://bundler.io/) installed, and then run:

```bash
bundle install
```

### 2. **Running Tests**

```
rspec
```

### 3. **Executing the Application**

```
ruby basket.rb
```

---

## âœ¨ Features

- Add items to basket using product codes (`B01`, `G01`, `R01`)
- Automatically applies:
  - Product pricing rules
  - Promotional offers
  - Delivery charges based on order value
- Clean and modular design using Ruby classes
- Truncates total cost to two decimal places without rounding
- Easily extendable for future rules and products

---

## ğŸ“¦ Products

| Product       | Code | Price  |
|---------------|------|--------|
| Red Widget    | R01  | $32.95 |
| Green Widget  | G01  | $24.95 |
| Blue Widget   | B01  | $7.95  |

## ğŸ’¥ Special Offers

### Red Widget (R01) â€“ Buy One, Get One Half Price

- **Unit Price:** $32.95
- **Offer:** Buy one, get the second at half price.
- **Color:** Red
- Applies to each **pair** of Red Widgets.
- An **odd item** (unpaired) is charged at **full price**.

#### ğŸ“¦ Pricing Examples

| Quantity | Calculation                                      | Total Price |
|----------|--------------------------------------------------|-------------|
| 1        | 1 Ã— $32.95                                       | **$32.95**  |
| 2        | 1 Ã— $32.95 + 1 Ã— $16.48                          | **$49.43**  |
| 3        | (2 for BOGO) + 1 full price = $49.43 + $32.95    | **$82.38**  |
| 4        | 2 BOGO pairs = 2 Ã— ($32.95 + $16.48)             | **$98.86**  |
| 5        | 2 BOGO pairs + 1 full price = $98.86 + $32.95    | **$131.81** |
| 6        | 3 BOGO pairs = 3 Ã— ($32.95 + $16.48)             | **$148.28** |

---

### Green Widget (G01) â€“ Regular Price

- **Unit Price:** $24.95
- **Color:** Green
- No special offers â€“ always charged at full price.

#### ğŸ“¦ Pricing Example

| Quantity | Calculation            | Total Price |
|----------|------------------------|-------------|
| 1        | 1 Ã— $24.95             | **$24.95**  |
| 2        | 2 Ã— $24.95             | **$49.90**  |
| 3        | 3 Ã— $24.95             | **$74.85**  |

---

### Blue Widget (B01) â€“ Regular Price

- **Unit Price:** $7.95
- **Color:** Blue
- No special offers â€“ always charged at full price.

#### ğŸ“¦ Pricing Example

| Quantity | Calculation            | Total Price |
|----------|------------------------|-------------|
| 1        | 1 Ã— $7.95              | **$7.95**   |
| 2        | 2 Ã— $7.95              | **$15.90**  |
| 3        | 3 Ã— $7.95              | **$23.85**  |

---

### ğŸ Pricing Breakdown

- **Red Widget (R01)** applies a Buy One, Get One Half Price offer on each pair. Odd items are charged at full price.
- **Green Widget (G01)** and **Blue Widget (B01)** have no special offers, and are charged at regular prices.

> ğŸ“¦ Delivery charges are applied based on subtotal thresholds.

---

## ğŸ“Œ Assumptions Inferred

- ğŸ” **Offers apply only in valid pairs** â€” any extra unit beyond the pair is full price.
- ğŸ’° **Discounts are applied before calculating delivery charges.**
- âœ‚ï¸ **Prices are truncated**, not rounded, to two decimal places (e.g., 82.375 becomes 82.37).
- ğŸ“¦ **Delivery charge tiers** are:
  - Subtotal < $50 â†’ $4.95 delivery
  - $50 â‰¤ Subtotal < $90 â†’ $2.95 delivery
  - Subtotal â‰¥ $90 â†’ Free delivery
- âœ… **Delivery is based on the discounted subtotal**, not the original (pre-offer) price.


---

## ğŸ§ª Example Baskets and Expected Totals

| Basket (Product Codes)         | Total   |
|-------------------------------|---------|
| `B01, G01`                    | $37.85  |
| `R01, R01`                    | $54.37  |
| `R01, G01`                    | $60.85  |
| `B01, B01, R01, R01, R01`     | $98.27  |
